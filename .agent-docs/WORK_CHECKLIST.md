# üìã Work Checklist - Neurocards Bot Production Ready

## ‚úÖ Phase 0: –ö–†–ò–¢–ò–ß–ù–û - Telegram API Proxy (–†–ï–®–ï–ù–û 2026-01-23)
> **–û–ë–ù–ê–†–£–ñ–ï–ù–û 2026-01-23**: –°–µ—Ä–≤–µ—Ä –≤ –†–æ—Å—Å–∏–∏ –ù–ï –ú–û–ñ–ï–¢ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã –≤ Telegram API!
> - ‚úÖ Telegram polling (–ø–æ–ª—É—á–µ–Ω–∏–µ updates) - —Ä–∞–±–æ—Ç–∞–µ—Ç
> - ‚úÖ Telegram sendVideo/sendPhoto - **–†–ê–ë–û–¢–ê–ï–¢ –ß–ï–†–ï–ó –ü–†–û–ö–°–ò** üü¢
> - ‚úÖ **–ü—Ä–æ–∫—Å–∏ —Ä–æ—Ç–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞** (10 –ø—Ä–æ–∫—Å–∏, cooldown 300s)
> 
> **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û:**
> - ‚úÖ `app/proxy_rotator.py` - ProxyRotator class (round-robin, auto-failover)
> - ‚úÖ `proxies.txt` - 10 working proxies (ip:port:user:pass)
> - ‚úÖ `app/config.py` - load_proxies_from_file()
> - ‚úÖ `app/main_polling.py` - Bot –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ `proxy=` –ø–∞—Ä–∞–º–µ—Ç—Ä
> - ‚úÖ `worker/openai_prompter.py` - GPT requests —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
> - ‚úÖ Docker images –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã –ë–ï–ó –ö–≠–®–ê
> - ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: "Run polling for bot @neurocardmpbot" ‚ú®

### üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–π:

#### ‚úÖ **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø: VPN –¥–ª—è –≤—Å–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $5-10/–º–µ—Å—è—Ü (WireGuard VPN –∏–ª–∏ OpenVPN)
- **–ü–ª—é—Å—ã:** 
  - –†–µ—à–∞–µ—Ç —Å—Ä–∞–∑—É Telegram + OpenAI GPT
  - –°—Ç–∞–±–∏–ª—å–Ω—ã–π IP (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è)
  - –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∏—Å—Ç–µ–º—ã
  - –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥ –±–æ—Ç–∞
- **–ú–∏–Ω—É—Å—ã:**
  - –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ VPN (–Ω–µ–±–æ–ª—å—à–∞—è latency)
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã:** Mullvad ($5), IVPN ($6), ProtonVPN ($5-10)
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** ~30-60 –º–∏–Ω—É—Ç

#### üü° **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: SOCKS5 Proxy**
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $5-15/–º–µ—Å—è—Ü –∑–∞ 1 –ø—Ä–æ–∫—Å–∏
- **–ü–ª—é—Å—ã:**
  - –î–µ—à–µ–≤–ª–µ
  - –¢–æ–ª—å–∫–æ Telegram —Ç—Ä–∞—Ñ–∏–∫ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- **–ú–∏–Ω—É—Å—ã:**
  - –ù—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥ –±–æ—Ç–∞ (–¥–æ–±–∞–≤–∏—Ç—å ProxyConnector)
  - GPT –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ)
  - –ú–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è ‚Üí –Ω—É–∂–µ–Ω —Ä–æ—Ç–∞—Ç–æ—Ä ($50-100/–º–µ—Å)
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã:** Webshare, IPRoyal, Proxy-Cheap

#### ‚ö†Ô∏è **–ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è Proxy Rotator** (–¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±–∞–Ω–æ–≤):
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $50-150/–º–µ—Å—è—Ü
- **–ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω:** 
  - –ï—Å–ª–∏ –æ–¥–∏–Ω –ø—Ä–æ–∫—Å–∏/VPN –Ω–∞—á–Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è
  - –î–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ (1000+ –≤–∏–¥–µ–æ/–¥–µ–Ω—å)
  - –î–ª—è GPT –µ—Å–ª–∏ OpenAI –±–∞–Ω–∏—Ç IP
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã:** Bright Data, Smartproxy, Oxylabs (residential proxies)

---

### üéØ –†–µ—à–µ–Ω–∏–µ –¥–ª—è –Ω–∞—á–∞–ª–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è):

**–í–∞—Ä–∏–∞–Ω—Ç 1: WireGuard VPN –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (~$5/–º–µ—Å)**
```bash
# –ö—É–ø–∏—Ç—å Mullvad/IVPN/ProtonVPN ($5-10/–º–µ—Å)
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å WireGuard –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
apt install wireguard
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
# –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ VPN
# ‚Üí Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
# ‚Üí OpenAI GPT —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: SOCKS5 –≤ Docker (–µ—Å–ª–∏ VPN –Ω–µ–ª—å–∑—è)**
```python
# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ app/main.py:
from aiohttp_socks import ProxyConnector

# –û–¥–∏–Ω —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ ($5-10/–º–µ—Å)
connector = ProxyConnector.from_url('socks5://user:pass@proxy:1080')
session = AiohttpSession(connector=connector)
bot = Bot(token=BOT_TOKEN, session=session)
```

**–î–ª—è GPT –æ—Ç–¥–µ–ª—å–Ω–æ** (Phase 8):
- –ï—Å–ª–∏ VPN –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ
- –ï—Å–ª–∏ SOCKS5 —Ç–æ–ª—å–∫–æ –¥–ª—è Telegram ‚Üí –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –¥–ª—è GPT

---

### ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û 2026-01-23:

- [x] **–í—ã–±—Ä–∞–Ω–æ —Ä–µ—à–µ–Ω–∏–µ: Proxy Rotation —á–µ—Ä–µ–∑ aiogram `proxy=` –ø–∞—Ä–∞–º–µ—Ç—Ä**
- [x] –°–æ–∑–¥–∞–Ω `app/proxy_rotator.py` - ProxyRotator class
- [x] –°–æ–∑–¥–∞–Ω `proxies.txt` - 10 working proxies
- [x] –î–æ–±–∞–≤–ª–µ–Ω `aiohttp-socks==0.9.*` –≤ requirements.txt
- [x] –ò–∑–º–µ–Ω–µ–Ω `app/main_polling.py` - Bot(proxy=proxy_url)
- [x] –ò–∑–º–µ–Ω–µ–Ω `worker/openai_prompter.py` - httpx —Å proxy –¥–ª—è GPT
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã `Dockerfile.bot` –∏ `Dockerfile.worker` - COPY proxies.txt
- [x] –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω Docker –ë–ï–ó –ö–≠–®–ê: `docker-compose build --no-cache bot`
- [x] –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –±–æ—Ç: `docker-compose up -d bot`
- [x] **–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç**: "Run polling for bot @neurocardmpbot" ‚úÖ

### üß™ –û–∂–∏–¥–∞–µ–º —Ç–µ—Å—Ç:
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –±–æ—Ç—É ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤–∏–¥–µ–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: –Ω–µ—Ç –æ—à–∏–±–æ–∫ Telegram API
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø—Ä–æ–∫—Å–∏ —Ä–æ—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Phase 1 complete ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ UI/UX (Phase 1.5)

---

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

**–ù–∞—á–∞—Ç—å —Å VPN ($5-10/–º–µ—Å)** ‚Äî —Ä–µ—à–∞–µ—Ç —Å—Ä–∞–∑—É –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã (Telegram + GPT), —Å—Ç–∞–±–∏–ª—å–Ω—ã–π IP, –Ω–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥. –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ä–æ—Ç–∞—Ç–æ—Ä –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ ‚Äî –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å residential proxy pool ($50-100/–º–µ—Å).

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ **–ö–†–ò–¢–ò–ß–ù–´–ô - –ë–ï–ó –≠–¢–û–ì–û –ë–û–¢ –ù–ï –†–ê–ë–û–¢–ê–ï–¢**

---

## üéØ Phase 1: –£—Å–ø–µ—à–Ω—ã–π —Ñ–ª–æ—É (–ó–ê–í–ï–†–®–ï–ù–û ‚úÖ)
> **–†–ï–®–ï–ù–û 2026-01-23**:
> - ‚úÖ Timeout –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: RQ (1800s), worker TTL (2400s), KIE polling (600s)
> - ‚úÖ Storage —Å–∏—Å—Ç–µ–º–∞: –ª–æ–∫–∞–ª—å–Ω–æ–µ /app/storage —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
> - ‚úÖ –í–∏–¥–µ–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è: KIE.AI —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–∏–¥–µ–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è (7-10 MB)
> - ‚úÖ –ü—Ä–æ–∫—Å–∏: –£–ë–†–ê–ù–ê –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–∫—Å–∏ –¥–ª—è sendVideo - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –Ω–µ—ë!
> - ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏: 180s (3 –º–∏–Ω—É—Ç—ã) + –±—ã—Å—Ç—Ä–∞—è —Ä–æ—Ç–∞—Ü–∏—è
> - ‚úÖ aiogram —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: `AiohttpSession(proxy=None, timeout=timeout)`
> - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏–¥–µ–æ: —Å–∫–∞—á–∞–Ω–æ –≤ `/app/storage/outputs/{job_id}.mp4`
> - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `FSInputFile` (–Ω–∞–¥–µ–∂–Ω–µ–µ)
> - ‚úÖ –û—á–∏—Å—Ç–∫–∞: –≤–∏–¥–µ–æ —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
> 
> **‚úÖ –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´**:
> - ‚úÖ KIE.AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ (~4-5 –º–∏–Ω—É—Ç)
> - ‚úÖ –í–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
> - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–æ–∫—Å–∏ (~1-3 –º–∏–Ω—É—Ç—ã)
> - ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –≤–∏–¥–µ–æ –≤ —á–∞—Ç–µ
> - ‚úÖ Job –æ—Ç–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ "done" –≤ –ë–î
> 
> **üöÄ PRODUCTION READY**: –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–ª–æ—É —Ä–∞–±–æ—Ç–∞–µ—Ç!

- [x] Worker timeouts (RQ: 1800s, TTL: 2400s, KIE: 600s)
- [x] Storage –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- [x] –í–∏–¥–µ–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ KIE.AI
- [x] –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (180s)
- [x] –û—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏ (FSInputFile)
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ
- [x] DB –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ "done"
- [x] –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

---

## üéØ Phase 1.5: UX & Features (–í –†–ê–ó–†–ê–ë–û–¢–ö–ï ‚úÖ)

### ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û 2026-01-23:

- [x] **–ö–Ω–æ–ø–∫–∞ "–°–¥–µ–ª–∞—Ç—å –µ—â–µ –≤–∏–¥–µ–æ"** –≤ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ "‚úÖ –ü—Ä–∏–Ω—è–ª! –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞..."
  - Callback: `again:{kind}` ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
  
- [x] **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –ø—Ä–∏ "–°–¥–µ–ª–∞—Ç—å –µ—â–µ"
  - –ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–¥–∞—á—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ñ–æ—Ç–æ (`input_photo_path`) –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ (`product_info`)
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –≤–æ—Ä–∫–µ—Ä –∫–∞–∫ –æ–±—ã—á–Ω—É—é –∑–∞–¥–∞—á—É
  
- [x] **–ö–Ω–æ–ø–∫–∞ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏** (–∫–æ–≥–¥–∞ –≤–∏–¥–µ–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)
  - "üîÅ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—â—ë" + "üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é"
  - –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `kb_result(kind)`

## üéØ Phase 1.5: UX & Features (–í –†–ê–ó–†–ê–ë–û–¢–ö–ï ‚úÖ)

### ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û 2026-01-23:

- [x] **–ö–Ω–æ–ø–∫–∞ "–°–¥–µ–ª–∞—Ç—å –µ—â–µ –≤–∏–¥–µ–æ"** –≤ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ "‚úÖ –ü—Ä–∏–Ω—è–ª! –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞..."
  - Callback: `again:{kind}` ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
  
- [x] **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –ø—Ä–∏ "–°–¥–µ–ª–∞—Ç—å –µ—â–µ"
  - –ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–¥–∞—á—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ñ–æ—Ç–æ (`input_photo_path`) –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ (`product_info`)
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –≤–æ—Ä–∫–µ—Ä –∫–∞–∫ –æ–±—ã—á–Ω—É—é –∑–∞–¥–∞—á—É
  
- [x] **–ö–Ω–æ–ø–∫–∞ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏** (–∫–æ–≥–¥–∞ –≤–∏–¥–µ–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)
  - "üîÅ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—â—ë" + "üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é"
  - –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `kb_result(kind)`

### ‚è≥ –ü–õ–ê–ù–ò–†–£–ï–¢–°–Ø (CRITICAL):

#### 1Ô∏è‚É£ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ KIE** (—á—Ç–æ —Å–µ–π—á–∞—Å: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry)
–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–¥ `kie_error_classifier.py`:
```python
def classify_kie_error(error_message: str) -> str:
    """
    –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É –∏–∑ KIE.AI:
    - 'transient' ‚Üí –Ω—É–∂–Ω–æ retry (timeout, API busy)
    - 'user_error' ‚Üí –Ω–µ retry, –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —é–∑–µ—Ä—É (bad image, no product)
    - 'unknown' ‚Üí –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å retry, –Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
    """
```

**–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï**:
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ –≤ –≤–∏–¥–µ–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø**: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫!

**–ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨**:
- [ ] –í `video_processor.py` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `classify_kie_error()` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ exception
- [ ] –ï—Å–ª–∏ `'user_error'` ‚Üí `refund_credit()` + –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —é–∑–µ—Ä—É
- [ ] –ï—Å–ª–∏ `'transient'` ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å retry (–∫–∞–∫ —Å–µ–π—á–∞—Å)
- [ ] –ï—Å–ª–∏ `'unknown'` ‚Üí retry –Ω–æ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–ü–†–ò–ú–ï–†–´ –û–®–ò–ë–û–ö** (–∏–∑ `kie_error_classifier.py`):
```
USER_ERROR PATTERNS:
- "image quality too low" ‚Üí —Å–∫–∞–∂–∏ —é–∑–µ—Ä—É "–§–æ—Ç–æ —Å–ª–∏—à–∫–æ–º —Ç–µ–º–Ω–æ–µ"
- "no product detected" ‚Üí "–ù–∞ —Ñ–æ—Ç–æ –Ω–µ –≤–∏–¥–Ω–æ —Ç–æ–≤–∞—Ä–∞"
- "image too small" ‚Üí "–ü–æ–∫–∞–∂–∏ —Ç–æ–≤–∞—Ä –∫—Ä—É–ø–Ω–µ–µ"

TRANSIENT PATTERNS:
- "timeout" ‚Üí –ø—Ä–æ—Å—Ç–æ retry
- "api is busy" ‚Üí –ø—Ä–æ—Å—Ç–æ retry
- "500" ‚Üí –ø—Ä–æ—Å—Ç–æ retry
```

#### 2Ô∏è‚É£ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram** (—á—Ç–æ —Å–µ–π—á–∞—Å: –ø—Ä–æ—Å—Ç–æ 3 retry)
–û—à–∏–±–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å:
- `Conflict: terminated` ‚Üí Telegram –≤–µ—Ä–Ω—É–ª–∞ –≤–∏–¥–µ–æ (–Ω–µ error, –Ω–∞–¥–æ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å)
- `400 Bad Request` ‚Üí BAD_MEDIA (–≤–∏–¥–µ–æ –∏—Å–ø–æ—Ä—á–µ–Ω–æ?) ‚Üí **refund + message**
- `429 Too Many Requests` ‚Üí Rate limit ‚Üí retry —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π (—É–∂–µ –µ—Å—Ç—å)
- `timeout` ‚Üí —Å–µ—Ç—å ‚Üí retry (—É–∂–µ –µ—Å—Ç—å)

**–ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨**:
- [ ] –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–Ω–µ —Ç–æ–ª—å–∫–æ retry –≤—Å–µ –ø–æ–¥—Ä—è–¥)
- [ ] 400 Bad Request ‚Üí `refund_credit()` + —Å–æ–æ–±—â–µ–Ω–∏–µ "–û—à–∏–±–∫–∞ –º–µ–¥–∏–∞"
- [ ] Timeout ‚Üí retry (–∫–∞–∫ —Å–µ–π—á–∞—Å)

#### 3Ô∏è‚É£ **–°–æ–æ–±—â–µ–Ω–∏—è —é–∑–µ—Ä—É** (—á—Ç–æ —Å–µ–π—á–∞—Å: –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è)
–ö–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
- ‚ùå –í–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞" (–∫—Ä–µ–¥–∏—Ç—ã —Å–ø–∏—Å–∞–Ω—ã)
- ‚ùå –í–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ü—Ä–∏–Ω—è–ª! –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞"
- ‚ùå **–ù–ò–ß–ï–ì–û –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–∞–ª—å—à–µ** (wait for update –≤ UI)
- ‚ùå –ù–µ –∑–Ω–∞–µ—Ç –ø–æ—á–µ–º—É –≤–∏–¥–µ–æ –Ω–µ –ø—Ä–∏—à–ª–æ

**–ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨**:
- [ ] –ö–æ–≥–¥–∞ –æ—à–∏–±–∫–∞ ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —á–∞—Ç:
  - KIE user_error ‚Üí "‚ùå –ù–∞ —Ñ–æ—Ç–æ –Ω–µ –≤–∏–¥–Ω–æ —Ç–æ–≤–∞—Ä–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∫–∞–∂–∏ —Ç–æ–≤–∞—Ä –∫—Ä—É–ø–Ω–µ–µ."
  - KIE transient (timeout) ‚Üí "‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–Ω—è–ª–∞ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑."
  - Send error ‚Üí "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤–∏–¥–µ–æ. –ö—Ä–µ–¥–∏—Ç—ã –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑."
- [ ] –ö–Ω–æ–ø–∫–∞ –¥–ª—è retry –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é

### ‚è≥ –û–ë–û–ó–ù–ê–ß–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò:

- [ ] **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** (KIE vs –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
  - [ ] KIE –æ—à–∏–±–∫–∞ (timeout, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ–º–∞–ª–∞—Å—å) ‚Üí **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry** ‚úÖ (—É–∂–µ –µ—Å—Ç—å)
  - [ ] –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ KIE (–µ—Å—Ç—å classifier, **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø**)
  - [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –æ—à–∏–±–∫–∞ ‚Üí **—Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç** (–Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å)
  
- [ ] **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤** (CRITICAL!)
  - [ ] –ö—Ä–µ–¥–∏—Ç —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ ‚úÖ (—É–∂–µ –µ—Å—Ç—å)
  - [ ] –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚úÖ (—É–∂–µ –µ—Å—Ç—å)
  - [ ] **‚ùå –ù–ï –í–û–ó–í–†–ê–©–ê–ï–¢–°–Ø –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏** (–±–∞–≥! –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å)
  - [ ] –Æ–∑–µ—Ä –≤–∏–¥–∏—Ç –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∫—Ä–µ–¥–∏—Ç—ã –≤ –∫–∞–±–∏–Ω–µ—Ç–µ
  
- [ ] **Validation –ª–æ–≥–∏–∫–∏**
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Ñ–æ—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–≤–∞—Ä (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –≤–∏–¥–µ–æ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤–∏–¥–µ–æ –≤ Telegram

---

## üìä Phase 2: Infrastructure & Stability (–ü–õ–ê–ù–ò–†–£–ï–¢–°–Ø)

- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
  - [ ] Metrics: videos/hour, queue length, worker health
  - [ ] Error tracking (Sentry –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
  - [ ] Dashboard –¥–ª—è –∞–¥–º–∏–Ω–∞
  
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
  - [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ GPT (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã)
  - [ ] Parallel –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - [ ] Compression –≤–∏–¥–µ–æ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π (–µ—Å–ª–∏ > 50MB)
  
- [ ] Backup & Recovery
  - [ ] Backup –ë–î (PostgreSQL)
  - [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã—Ö jobs –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
  - [ ] Cleanup —Å—Ç–∞—Ä—ã—Ö –≤–∏–¥–µ–æ –∏–∑ storage

---

## ÔøΩ –ü–†–û–í–ï–†–ö–ê –ö–†–ï–î–ò–¢–û–í (CRITICAL)

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:
1. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏** (–º–µ–Ω—é)
   - `start_generation()` ‚Üí `consume_credits(tg_user_id, COST_PER_GENERATION)`
   - –≠—Ç–æ **–°–ü–ò–°–ê–ù–ò–ï** –∫—Ä–µ–¥–∏—Ç–æ–≤ - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –°–†–ê–ó–£

2. **–ü—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** (KIE timeout –∏–ª–∏ –æ—à–∏–±–∫–∞)
   - `await refund_credit(tg_user_id, credits_cost)` –≤ –≤–æ—Ä–∫–µ—Ä–µ
   - –í–æ–∑–≤—Ä–∞—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤ - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ `except` –±–ª–æ–∫–µ

3. **–ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏** (sendVideo timeout)
   - ‚ùå **–ü–†–û–ë–õ–ï–ú–ê**: –ö—Ä–µ–¥–∏—Ç—ã –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è!
   - –í–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ, –Ω–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–æ—Å—å ‚Üí –∫—Ä–µ–¥–∏—Ç—ã –ø–æ—Ç–µ—Ä—è–Ω—ã

### –†–ï–®–ï–ù–ò–ï:
- [ ] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (send_attempts > 3) –¥–æ–ª–∂–Ω–∞ –≤—ã–∑–≤–∞—Ç—å `refund_credit()`
- [ ] –¢–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ ‚Üí –∫—Ä–µ–¥–∏—Ç—ã —Å–ø–∏—Å–∞–Ω—ã –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: –∫–æ–≥–¥–∞ —Å–ø–∏—Å–∞–Ω–æ, –∫–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ, –ø–æ—á–µ–º—É

### –¢–µ–∫—É—â–∏–π –∫–æ–¥ (–≤–∏–¥–µ–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä):
```python
# LINES 238-318: –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ
try:
    # 3 –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
    while send_attempts < 3:
        send_attempts += 1
        try:
            await bot.send_video(...)
            break  # SUCCESS
        except Exception:
            await asyncio.sleep(5)
    
    if send_attempts == 3:
        # ‚ùå –ë–ê–ì: –ï—Å–ª–∏ –≤—Å–µ 3 –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
        # –ö—Ä–µ–¥–∏—Ç—ã —É–∂–µ —Å–ø–∏—Å–∞–Ω—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–ª—É—á–∏—Ç!
        # –ù–£–ñ–ù–û: refund_credit(tg_user_id, credits_cost)
        raise RuntimeError("Failed to send video after 3 attempts")
finally:
    os.remove(video_path)
```

### –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:
```python
send_attempts = 0
while send_attempts < 3:
    send_attempts += 1
    try:
        await bot.send_video(...)
        logger.info(f"Video sent successfully to {tg_user_id}")
        break  # SUCCESS - –∫—Ä–µ–¥–∏—Ç—ã —Å–ø–∏—Å–∞–Ω—ã –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ
    except Exception as e:
        if send_attempts < 3:
            logger.warning(f"Send attempt {send_attempts} failed, retrying...")
            await asyncio.sleep(5)
        else:
            # IMPORTANT: –í–æ–∑–≤—Ä–∞—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –Ω–µ—É–¥–∞—á–µ
            logger.error(f"All 3 send attempts failed for {job_id}")
            await refund_credit(tg_user_id, credits_cost)
            raise RuntimeError(f"Failed to send video after 3 attempts: {e}")
```

---

## üìã TODO –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º:
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (–¥–æ–±–∞–≤–∏—Ç—å refund –ø—Ä–∏ send_attempts==3)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ DB (credit_log —Ç–∞–±–ª–∏—Ü–∞ —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏)
- [ ] API –¥–ª—è –∞–¥–º–∏–Ω–∞: `/api/admin/refund/{user_id}/{amount}`
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞: —é–∑–µ—Ä –≤–∏–¥–∏—Ç –±–∞–ª–∞–Ω—Å –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã –≤ DB



- [ ] Rate limiting
  - [ ] Max N –≤–∏–¥–µ–æ –≤ –¥–µ–Ω—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] Delay –º–µ–∂–¥—É –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–º–∏ (—á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å)
  - [ ] Validation input (—Ä–∞–∑–º–µ—Ä —Ñ–æ—Ç–æ, —Ñ–æ—Ä–º–∞—Ç)
  
- [ ] –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] Horizontal: –¥–æ–±–∞–≤–∏—Ç—å –≤–æ—Ä–∫–µ—Ä–æ–≤ (currently 3)
  - [ ] Vertical: —É–≤–µ–ª–∏—á–∏—Ç—å recursos (CPU, RAM)
  - [ ] Load balancing –¥–ª—è KIE.AI requests
  
- [ ] Alternative API –µ—Å–ª–∏ KIE –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
  - [ ] Fallback –Ω–∞ –¥—Ä—É–≥–æ–π video generation API
  - [ ] Queuing —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

## üé® –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –Ω–∞ 2026-01-23

### ‚úÖ –†–ê–ë–û–¢–ê–ï–¢:
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É: —Ñ–æ—Ç–æ ‚Üí KIE ‚Üí –≤–∏–¥–µ–æ ‚Üí Telegram
- ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤–∏–¥–µ–æ (–ª–æ–∫–∞–ª—å–Ω–æ–µ)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–¥–µ–ª–∞—Ç—å –µ—â–µ –≤–∏–¥–µ–æ"
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ö—Ä–µ–¥–∏—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Å–ø–∏—Å–∞–Ω–∏–µ/–≤–æ–∑–≤—Ä–∞—Ç)
- ‚úÖ RQ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (queue, workers, timeouts)

### üöß –í –†–ê–ó–†–ê–ë–û–¢–ö–ï:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (human readable messages)
- Validation –∫—Ä–µ–¥–∏—Ç–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### ‚è≥ –°–õ–ï–î–£–Æ–©–ò–ï –ü–†–ò–û–†–ò–¢–ï–¢–´:
1. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —é–∑–µ—Ä—É —á—Ç–æ –Ω–µ —Ç–∞–∫)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫—Ä–µ–¥–∏—Ç–æ–≤
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
4. Production deploy + final checklist

---

## üé® Phase 1.5: UI/UX - –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Ñ–ª–æ—É (–û–°–ù–û–í–ê –ó–ê–õ–û–ñ–ï–ù–ê ‚úÖ)
> **–¶–ï–õ–¨**: –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∏–¥–µ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –µ—â–µ –æ–¥–Ω–æ —Å —Ç–µ–º –∂–µ —Ç–æ–≤–∞—Ä–æ–º
> 
> **–°–¢–ê–¢–£–°**: –û—Å–Ω–æ–≤–∞ –≥–æ—Ç–æ–≤–∞ –≤ `PHASE_1.5_2_FOUNDATION.md`, –æ–∂–∏–¥–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ Phase 1

### üèóÔ∏è –ó–∞–ª–æ–∂–µ–Ω–Ω–∞—è –æ—Å–Ω–æ–≤–∞:
- [x] –°–æ–∑–¥–∞–Ω `app/handlers/cyclic_flow.py` - handler –¥–ª—è "–°–¥–µ–ª–∞—Ç—å –µ—â–µ"
- [x] –î–æ–±–∞–≤–ª–µ–Ω `kb_video_ready()` –≤ keyboards.py
- [x] –î–æ–±–∞–≤–ª–µ–Ω `SUPPORT_URL` –≤ config.py
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã error messages –Ω–∞ @fabricbothelper

### üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø–æ—Å–ª–µ Phase 1):
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å `cyclic_flow.router` –≤ main_polling.py
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `kb_video_ready()` –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤–∏–¥–µ–æ
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `photo_path` –∏ `product_info` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ state
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: –≤–∏–¥–µ–æ ‚Üí "üîÑ –°–¥–µ–ª–∞—Ç—å –µ—â–µ" ‚Üí –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞ ‚Üí –Ω–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

### üîÑ –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–ö–õ–Æ–ß–ï–í–ê–Ø –§–ò–ß–ê):

**8. –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ—Ç–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ** ‚≠ê
- [ ] –í–∏–¥–µ–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] **–í –¢–û–ú –ñ–ï –°–û–û–ë–©–ï–ù–ò–ò —Å –≤–∏–¥–µ–æ –¥–æ–±–∞–≤–∏—Ç—å inline –∫–Ω–æ–ø–∫–∏:**
  - [ ] `üîÑ –°–¥–µ–ª–∞—Ç—å –µ—â–µ —Å —ç—Ç–∏–º —Ç–æ–≤–∞—Ä–æ–º` ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É –ø—Ä–æ–º–ø—Ç–æ–≤ (—à–∞–≥ 3)
  - [ ] `üè† –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é` ‚Üí –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- [ ] –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "üîÑ –°–¥–µ–ª–∞—Ç—å –µ—â–µ":
  - [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ
  - [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–º–ø—Ç–æ–≤
  - [ ] **–ù–ï –ù–£–ñ–ù–û** –∑–∞–Ω–æ–≤–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
  - [ ] –ú–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –ø–æ–∫–∞ –µ—Å—Ç—å –∫—Ä–µ–¥–∏—Ç—ã

### –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏:
1. [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ + —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
2. [ ] –û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è —Ü–∏–∫–ª–æ–≤)
3. [ ] –í—ã–±–æ—Ä –ø—Ä–æ–º—Ç–∞ (—à–∞–±–ª–æ–Ω–∞)
4. [ ] –ü–æ–∂–µ–ª–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å")
5. [ ] –í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞: 1, 2, 3, 5 –≤–∏–¥–µ–æ
6. [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (—Ç–æ–≤–∞—Ä, –ø—Ä–æ–º—Ç, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å—Ç–æ–∏–º–æ—Å—Ç—å)
7. [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞, ~5-10 –º–∏–Ω—É—Ç"
8. [ ] **–í–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ + –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ü–∏–∫–ª–∞** ‚≠ê

### –î—Ä—É–≥–∏–µ UX —É–ª—É—á—à–µ–Ω–∏—è:
- [ ] **–ò–∑–º–µ–Ω–∏—Ç—å —Å—Å—ã–ª–∫—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ `@fabricbothelper`** –≤–æ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–∞—Ö
- [ ] –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏:
  - [ ] "üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑" (–µ—Å–ª–∏ –Ω–µ USER_VIOLATION)
  - [ ] "üè† –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é"
- [ ] –ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –∫—Ä–µ–¥–∏—Ç–æ–≤:
  - [ ] "üí∞ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤"
  - [ ] "üí≥ –û–ø–ª–∞—Ç–∏—Ç—å"
  - [ ] "üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é"

---

## ‚ö†Ô∏è Phase 2: Error Handling - Retry –ª–æ–≥–∏–∫–∞ (–û–°–ù–û–í–ê –ó–ê–õ–û–ñ–ï–ù–ê ‚úÖ)
> **–¶–ï–õ–¨**: –û—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ KIE.AI + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry + refund
> 
> **–°–¢–ê–¢–£–°**: –û—Å–Ω–æ–≤–∞ –≥–æ—Ç–æ–≤–∞ –≤ `PHASE_1.5_2_FOUNDATION.md`, –æ–∂–∏–¥–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ worker

### üèóÔ∏è –ó–∞–ª–æ–∂–µ–Ω–Ω–∞—è –æ—Å–Ω–æ–≤–∞:
- [x] `app/db_adapter.py` - —Ñ—É–Ω–∫—Ü–∏–∏ `increment_job_retry`, `mark_job_failed_with_refund`
- [x] `worker/kie_error_classifier.py` - –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, retry —Ä–µ—à–µ–Ω–∏—è, user messages
- [x] `app/keyboards.py` - –∫–Ω–æ–ø–∫–∏ `kb_error_retry()`, `kb_error_no_retry()`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω support –Ω–∞ @fabricbothelper

### üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ worker (–ø–æ—Å–ª–µ Phase 1.5):
- [ ] –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É –≤ `worker/worker.py` (MAX_RETRY=4)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `retry_count` –≤ —Ç–∞–±–ª–∏—Ü—É `jobs`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `classify_kie_error` –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å exponential backoff —á–µ—Ä–µ–∑ `get_retry_delay`

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] USER_VIOLATION ‚Üí no retry, refund, –ø–æ–∫–∞–∑–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] TEMPORARY ‚Üí 4 retry —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 5-10-20-40 —Å–µ–∫
- [ ] RATE_LIMIT ‚Üí 4 retry —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 60-120-240 —Å–µ–∫
- [ ] BILLING ‚Üí no retry, refund, —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ @fabricbothelper
- [ ] 4 failed retry ‚Üí refund, —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫:
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–ø –æ—à–∏–±–∫–∏
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ retry —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] **–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å** ‚úÖ

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- [ ] –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å KIE.AI API (retry 4 —Ä–∞–∑–∞)
- [ ] –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π URL –∫–∞—Ä—Ç–∏–Ω–∫–∏
- [ ] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ —Å KIE (retry)
- [ ] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram (retry –æ—Ç–ø—Ä–∞–≤–∫–∏)
- [ ] –ü—Ä–æ–±–ª–µ–º—ã —Å storage/nginx

---

## üîÑ Phase 3: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- [ ] **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å 3 –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**
  - [ ] –í—Å–µ 3 –∑–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - [ ] –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π KIE task_id
  - [ ] –í–æ—Ä–∫–µ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
  - [ ] –í—Å–µ 3 –≤–∏–¥–µ–æ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - [ ] –ö—Ä–µ–¥–∏—Ç—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (3 –∫—Ä–µ–¥–∏—Ç–∞)
  - [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
  - [ ] Storage —Ñ–∞–π–ª—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞

- [ ] **–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
  - [ ] 10 –≤–∏–¥–µ–æ –ø–æ–¥—Ä—è–¥
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

---

## ‚úçÔ∏è Phase 4: –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
> _–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é_

- [ ] –ü–æ–ª—É—á–∏—Ç—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `worker/prompt_templates.py`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ–º–ø—Ç–æ–≤ –Ω–∞ 3-5 –ø—Ä–∏–º–µ—Ä–∞—Ö
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ fallback –ø—Ä–æ–º–ø—Ç —Ç–æ–∂–µ —É–ª—É—á—à–µ–Ω

**–¢–µ–∫—É—â–∏–π –ø—Ä–æ–º–ø—Ç:**
```
A commercial video showing: {product_text}
```

**–ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç:**
```
<!-- –ë—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º -->
```

---

## üì± Phase 5: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ UX –≤ –±–æ—Ç–µ
### –°—Ç–∞—Ç—É—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
- [ ] **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏**
  - [ ] "‚è≥ –í–∞—à–µ –≤–∏–¥–µ–æ –≥–æ—Ç–æ–≤–∏—Ç—Å—è... –≠—Ç–æ –∑–∞–π–º–µ—Ç 3-10 –º–∏–Ω—É—Ç"
  - [ ] –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –∫—Ä–µ–¥–∏—Ç–æ–≤
  - [ ] –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- [ ] **–ü—Ä–∏ —É—Å–ø–µ—Ö–µ**
  - [ ] "‚úÖ –í–∞—à–µ –≤–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ!"
  - [ ] –ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –∫—Ä–µ–¥–∏—Ç–æ–≤
  - [ ] –ö–Ω–æ–ø–∫–∏: "–°–æ–∑–¥–∞—Ç—å –µ—â–µ" / "–ú–æ–∏ –≤–∏–¥–µ–æ" / "–ö—É–ø–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã"

- [ ] **–ü—Ä–∏ –æ—à–∏–±–∫–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏**
  - [ ] "‚ùå –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –ø—Ä–æ—à–µ–ª –º–æ–¥–µ—Ä–∞—Ü–∏—é KIE.AI"
  - [ ] "üí∞ 1 –∫—Ä–µ–¥–∏—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω –Ω–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å"
  - [ ] –û–±—ä—è—Å–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–µ—Ç–∞–ª–∏)

- [ ] **–ü—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–µ (retry)**
  - [ ] "‚ö†Ô∏è –ü–æ–ø—ã—Ç–∫–∞ 1 –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø–æ–≤—Ç–æ—Ä—è–µ–º..."
  - [ ] –ù–ï –ø—É–≥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] –ö—Ä–µ–¥–∏—Ç –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è (–µ—â–µ –∏–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞)

- [ ] **–ü—Ä–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—à–∏–±–∫–µ (–ø–æ—Å–ª–µ –≤—Å–µ—Ö retry)**
  - [ ] "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫"
  - [ ] "üí∞ 1 –∫—Ä–µ–¥–∏—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω –Ω–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å"
  - [ ] "üîÑ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ"

- [ ] **–ü—Ä–∏ –¥–æ–ª–≥–æ–º –æ–∂–∏–¥–∞–Ω–∏–∏ (–æ—á–µ—Ä–µ–¥—å)**
  - [ ] –ï—Å–ª–∏ >5 –º–∏–Ω—É—Ç: "‚è≥ –°–µ—Ä–≤–∏—Å Sora-2 –∑–∞–≥—Ä—É–∂–µ–Ω, –≤–∞—à–µ –≤–∏–¥–µ–æ –≤ –æ—á–µ—Ä–µ–¥–∏"
  - [ ] "‚è±Ô∏è –û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–∏–º–µ—Ä–Ω–æ N –º–∏–Ω—É—Ç"
  - [ ] –ù–µ —Å–ø–∞–º–∏—Ç—å, –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞:
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –∫–æ–≥–¥–∞ –∫—Ä–µ–¥–∏—Ç—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è (<3)
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å" –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases:
- [ ] –ß—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ —Ñ–æ—Ç–æ –ø–æ–∫–∞ —Å—Ç–∞—Ä–æ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è?
- [ ] –ß—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏?
- [ ] –õ–∏–º–∏—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?

---

## üöÄ Phase 6: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (10-40 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–∏–¥–µ–æ)
### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è (–∏–∑ –∑–∞–º–µ—Ç–æ–∫):
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** 10-20-30-40 –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–†–æ—Ç–∞—Ç–æ—Ä –∫–ª—é—á–µ–π:** –í–æ–∑–º–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã KIE.AI
- **1 –≤–æ—Ä–∫–µ—Ä = 1 –≤–∏–¥–µ–æ –≤ –º–æ–º–µ–Ω—Ç–µ** (—Å –æ—á–µ—Ä–µ–¥—å—é)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–∏–¥–µ–æ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤** üéØ

### –†–∞—Å—á–µ—Ç—ã:
- **–¶–µ–ª—å:** 100 –≤–∏–¥–µ–æ –≤ —á–∞—Å
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** 5-10 –º–∏–Ω—É—Ç –Ω–∞ –≤–∏–¥–µ–æ
- **–§–æ—Ä–º—É–ª–∞:** –î–ª—è 100 –≤–∏–¥–µ–æ/—á–∞—Å –Ω—É–∂–Ω–æ **10-20 –≤–æ—Ä–∫–µ—Ä–æ–≤** (–ø—Ä–∏ 5-10 –º–∏–Ω –Ω–∞ –≤–∏–¥–µ–æ)
- **–ù–∞—á–Ω–µ–º —Å:** 10 –≤–æ—Ä–∫–µ—Ä–æ–≤ ‚Üí 60-120 –≤–∏–¥–µ–æ/—á–∞—Å

### –ó–∞–¥–∞—á–∏:
- [ ] **–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
  - [ ] 1 –≤–æ—Ä–∫–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 1 –≤–∏–¥–µ–æ –∑–∞ —Ä–∞–∑ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)
  - [ ] –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU/RAM –Ω–∞ 1 –≤–æ—Ä–∫–µ—Ä
  - [ ] Bottleneck: Network (–æ–∂–∏–¥–∞–Ω–∏–µ KIE.AI) –∏–ª–∏ System resources?
  - [ ] –°–∫–æ–ª—å–∫–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π VPS?

- [ ] **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–æ–ª—å—à–µ –≤–æ—Ä–∫–µ—Ä–æ–≤)**
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `--scale worker=5` (–Ω–∞—á–∏–Ω–∞–µ–º –ø–ª–∞–≤–Ω–æ)
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `--scale worker=10`
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `--scale worker=20`
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `--scale worker=40` (–º–∞–∫—Å–∏–º—É–º)
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Redis —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –æ—á–µ—Ä–µ–¥—å—é
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ PostgreSQL —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å concurrent writes
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ nginx —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è (storage I/O)
  - [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ RAM/CPU –ø—Ä–∏ —Ä–∞–∑–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤–æ—Ä–∫–µ—Ä–æ–≤

- [ ] **–†–æ—Ç–∞—Ü–∏—è API –∫–ª—é—á–µ–π KIE.AI**
  - [ ] –°–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π –Ω—É–∂–Ω–æ –¥–ª—è 100 –≤–∏–¥–µ–æ/—á–∞—Å?
  - [ ] –õ–∏–º–∏—Ç—ã KIE.AI –Ω–∞ 1 –∫–ª—é—á (requests/minute, requests/hour)
  - [ ] –í–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ä–∞–∑–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã KIE.AI** üí°
  - [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π –≤ –∫–æ–Ω—Ñ–∏–≥
  - [ ] –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –∫–ª—é—á–∞–º–∏
  - [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–ª—é—á–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

- [ ] **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)**
  - [ ] –¢–µ–∫—É—â–∏–π VPS: —Å–∫–æ–ª—å–∫–æ RAM, CPU, Disk?
  - [ ] –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ ‚Üí –∞–ø–≥—Ä–µ–π–¥ VPS
  - [ ] –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
  - [ ] Connection pooling (—É–∂–µ –µ—Å—Ç—å)
  - [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è poll interval (—Å–µ–π—á–∞—Å 10s, –º–æ–∂–µ—Ç –±—ã—Ç—å 15s?)
  - [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
  - [ ] –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤
  - [ ] –ú–µ—Ç—Ä–∏–∫–∏: videos/hour, queue length, worker status, API key usage
  - [ ] Dashboard (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: Prometheus + Grafana)

---

## ÔøΩ Phase 7: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Metabase)
### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö:
- [ ] **User Profile**
  - [ ] –ö–æ–≥–¥–∞ –∑–∞—à–µ–ª (first_seen, last_seen)
  - [ ] –°–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ –∑–∞–∫–∞–∑–∞–ª (total_jobs)
  - [ ] –°–∫–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã—Ö –≤–∏–¥–µ–æ (successful_jobs)
  - [ ] –°–∫–æ–ª—å–∫–æ –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö (failed_jobs)
  - [ ] –ö–æ–≥–¥–∞ –∫—É–ø–∏–ª —Ç–æ–∫–µ–Ω—ã, —Å–∫–æ–ª—å–∫–æ, –∫–∞–∫ —á–∞—Å—Ç–æ
  - [ ] –ö–∞–∫ —á–∞—Å—Ç–æ –∑–∞—Ö–æ–¥–∏—Ç –≤ –±–æ—Ç–∞ (activity_log)
  - [ ] –ö—Ç–æ –æ—Ç –∫–æ–≥–æ –ø—Ä–∏—à–µ–ª (referral_system)
  - [ ] Username, –∏–º—è, —è–∑—ã–∫

- [ ] **Jobs Analytics**
  - [ ] –£—Å–ø–µ—à–Ω—ã–µ jobs (—Å –≤—Ä–µ–º–µ–Ω–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)
  - [ ] –ù–µ—É—Å–ø–µ—à–Ω—ã–µ jobs (—Å —Ç–∏–ø–æ–º –æ—à–∏–±–∫–∏)
  - [ ] –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ (queued ‚Üí processing ‚Üí done/failed)
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º—Ç, —Ç–æ–≤–∞—Ä
  - [ ] –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è, –Ω–∞—á–∞–ª–∞, –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
  - [ ] KIE task_id –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

- [ ] **Payments & Credits**
  - [ ] –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
  - [ ] –°—É–º–º–∞, –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã, –¥–∞—Ç–∞
  - [ ] –ò—Å—Ç–æ—Ä–∏—è —Å–ø–∏—Å–∞–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–æ–≤
  - [ ] –ò—Å—Ç–æ—Ä–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤
  - [ ] –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å

- [ ] **Referral System**
  - [ ] –ö—Ç–æ –∫–æ–≥–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª
  - [ ] –°–∫–æ–ª—å–∫–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] –ë–æ–Ω—É—Å—ã –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### Metabase Integration:
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Metabase (Docker container)
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ PostgreSQL
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã:
  - [ ] **User Overview:** –≤—Å–µ–≥–æ —é–∑–µ—Ä–æ–≤, –∞–∫—Ç–∏–≤–Ω—ã—Ö, –Ω–æ–≤—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥
  - [ ] **Jobs Overview:** –≤—Å–µ–≥–æ jobs, —É—Å–ø–µ—à–Ω—ã—Ö, failed, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
  - [ ] **Revenue:** –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–∫–µ–Ω–æ–≤, revenue –∑–∞ –ø–µ—Ä–∏–æ–¥
  - [ ] **Engagement:** —á–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, retention rate
  - [ ] **Errors Dashboard:** —Ç–æ–ø –æ—à–∏–±–æ–∫, –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  - [ ] **KIE API Usage:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π, rate limits

### Admin Functions:
- [ ] **–í—ã–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**
  - [ ] Admin –∫–æ–º–∞–Ω–¥–∞ –≤ –±–æ—Ç–µ: `/admin_add_credits <user_id> <amount>`
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–¥–∞—á–∏
  
- [ ] **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
  - [ ] `/admin_user_info <user_id>` ‚Üí –ø–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  
- [ ] **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
  - [ ] `/admin_ban <user_id>`

### Database Schema Updates:
- [ ] –¢–∞–±–ª–∏—Ü–∞ `users`: –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (first_seen, last_seen, referrer_id)
- [ ] –¢–∞–±–ª–∏—Ü–∞ `jobs`: —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å –≤—Å–µ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
- [ ] –¢–∞–±–ª–∏—Ü–∞ `payments`: –∏—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫
- [ ] –¢–∞–±–ª–∏—Ü–∞ `credit_transactions`: –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫—Ä–µ–¥–∏—Ç–∞–º–∏
- [ ] –¢–∞–±–ª–∏—Ü–∞ `activity_log`: –ª–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üåê Phase 8: –ü—Ä–æ–∫—Å–∏ –¥–ª—è OpenAI GPT (–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ fallback)
> **–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ  
> **–ü—Ä–æ–±–ª–µ–º–∞:** OpenAI API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –†–æ—Å—Å–∏–∏ (403 Forbidden), –Ω–æ –µ—Å—Ç—å fallback
> **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è product_text –Ω–∞–ø—Ä—è–º—É—é –≤–º–µ—Å—Ç–æ GPT-enhanced –ø—Ä–æ–º–ø—Ç–∞

### –ó–∞–¥–∞—á–∏:
- [ ] **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏ –¥–ª—è OpenAI API**
  - [ ] –í—ã–±–æ—Ä –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–∏—Å–∞ (residential proxies, datacenter proxies)
  - [ ] –í–∞—Ä–∏–∞–Ω—Ç—ã:
    - [ ] –ü–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å (Bright Data, Oxylabs, Smartproxy)
    - [ ] VPN –¥–ª—è –≤—Å–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
    - [ ] Proxy-rotator —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–∫—Å–∏
    - [ ] Cloudflare Workers / Edge Functions –∫–∞–∫ –ø—Ä–æ–∫—Å–∏
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `worker/openai_prompter.py`
  - [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

- [ ] **–†–æ—Ç–∞—Ç–æ—Ä OpenAI API –∫–ª—é—á–µ–π**
  - [ ] –°–∏—Å—Ç–µ–º–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –∫–ª—é—á–µ–π (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ KIE)
  - [ ] –ù–µ—Å–∫–æ–ª—å–∫–æ OpenAI API –∫–ª—é—á–µ–π
  - [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
  - [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –ª–∏–º–∏—Ç–æ–≤
  - [ ] –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –∫–ª—é—á–∞–º–∏

- [ ] **Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**
  - [ ] –¢–µ–∫—É—â–∏–π fallback: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ product_text –Ω–∞–ø—Ä—è–º—É—é ‚úÖ
  - [ ] –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ª–æ–∫–∞–ª—å–Ω–∞—è LLM (LLaMA, Mistral)
  - [ ] –ò–ª–∏ –≤–Ω–µ—à–Ω–∏–π GPT-—Å–µ—Ä–≤–∏—Å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏

- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
  - [ ] –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ % —É—Å–ø–µ—à–Ω—ã—Ö GPT –∑–∞–ø—Ä–æ—Å–æ–≤
  - [ ] –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –æ—à–∏–±–∫–∞—Ö 403 Forbidden
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏
  - [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ API –∫–ª—é—á–∞–º

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- üü° **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ fallback)
- üìÖ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö
- ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ (GPT —É–ª—É—á—à–∞–µ—Ç —Ç–µ–∫—Å—Ç)

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π VPS
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Redis Sentinel –¥–ª—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- [ ] PostgreSQL —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è
- [ ] Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] CDN –¥–ª—è storage (CloudFlare R2 / S3)
- [ ] Webhook –æ—Ç KIE.AI –≤–º–µ—Å—Ç–æ polling (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
- [ ] Rate limiting –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∑–∞—â–∏—Ç–∞ –æ—Ç –∞–±—É–∑–∞)

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Production
- [ ] –£—Å–ø–µ—à–Ω—ã–π —Ñ–ª–æ—É —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ (10/10 —Ç–µ—Å—Ç–æ–≤)
- [ ] –í—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] 3+ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω—ã–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ
- [ ] –°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 100 –≤–∏–¥–µ–æ/—á–∞—Å
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –º–µ—Å—Ç–µ

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-23  
**–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞:** Phase 1 - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ñ–ª–æ—É
