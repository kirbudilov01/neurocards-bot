#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

echo "üîÑ Restarting all services..."

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
sudo systemctl restart neurocards-bot-webhook.service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –≤–æ—Ä–∫–µ—Ä–æ–≤
WORKER_COUNT=${WORKER_INSTANCES:-5}
for i in $(seq 1 $WORKER_COUNT); do
    sudo systemctl restart neurocards-worker@$i.service
done

echo "‚úÖ All services restarted"
echo ""
echo "Check status:"
echo "  Bot:     sudo systemctl status neurocards-bot-webhook.service"
echo "  Workers: sudo systemctl status neurocards-worker@*.service"
